<extend name="Public/base"/>
<block name="body">

        <section>
            <div class="container">
                <div class="con_info">
                    <div class="con_1">
                        <p>用户充值</p>
                        <div class="con_one">
                            <div class="con_item">
                                <a href="javascript:;wap_pay('100')">100元</a> |
                                <a href="javascript:;wap_pay('500')">500元</a> |
                                <a href="javascript:;wap_pay('1000')">1000元</a>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </section>
</block>


<block name="script">

    <script type="text/javascript" src="__STATIC__/jquery-2.0.3.min.js"></script>
    <script src="/payPing/dist/pingpp.js" type="text/javascript"></script>
    <script type="text/javascript">
        function wap_pay(channel) {
            $.ajax({
                url: "{:U('Center/pay')}",
                type: "post",
                data: 'score='+channel,
                dataType: "json",
                success: function (data) {
                    pingpp.createPayment(data, function (result, err) {
                        console.log(result);
                        console.log(err.msg);
                        console.log(err.extra);
                        if (result == "success") {
                            // 只有微信公众账号 wx_pub 支付成功的结果会在这里返回，其他的支付结果都会跳转到 extra 中对应的 URL。
                        } else if (result == "fail") {
                            // charge 不正确或者微信公众账号支付失败时会在此处返回
                        } else if (result == "cancel") {
                            // 微信公众账号支付取消支付
                        }
                    });
                },
                error: function (data) {
                    alert(data);
                }
            })

        }

        //搜索功能
        $("#search").click(function () {
            var url = $(this).attr('url');
            var query = $('.search-form').find('input').serialize();
            query = query.replace(/(&|^)(\w*?\d*?\-*?_*?)*?=?((?=&)|(?=$))/g, '');
            query = query.replace(/^&/g, '');
            if (url.indexOf('?') > 0) {
                url += '&' + query;
            } else {
                url += '?' + query;
            }
            window.location.href = url;
        });
        //回车搜索
        $(".search-input").keyup(function (e) {
            if (e.keyCode === 13) {
                $("#search").click();
                return false;
            }
        });
        //导航高亮
        highlight_subnav('{:U('
        Center / recharge
        ')}'
        )
        ;
    </script>
</block>
